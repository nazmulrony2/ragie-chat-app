ржЕржмрж╢рзНржпржЗ! ржХрзЛржбрзЗрж░ ржнрзЗрждрж░рзЗ ржЖрж░ржУ ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ ржмрж┐рж╖рзЯ рж▓рзБржХрж┐рзЯрзЗ ржЖржЫрзЗ ржпрж╛ ржПржХржЬржи ржмрж┐ржЧрж┐ржирж╛рж░рзЗрж░ ржЬрж╛ржирж╛ ржЦрзБржм ржЬрж░рзБрж░рж┐ред ржЖржорж┐ ржЖрж░ржУ рзйржЯрж┐ ржХржирж╕рзЗржкрзНржЯ ржЦрзБржм рж╕рж╣ржЬ ржХрж░рзЗ ржмрзБржЭрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрж┐ред

### рзз. `async` ржПржмржВ `await` (ржзрзИрж░рзНржп ржзрж░рж╛рж░ ржЦрзЗрж▓рж╛)

ржХрзЛржбрзЗрж░ ржЕржирзЗржХ ржЬрж╛рзЯржЧрж╛рзЯ ржжрзЗржЦржмрзЗржи `async` ржПржмржВ `await` рж╢ржмрзНржж ржжрзБржЯрж┐ рж▓рзЗржЦрж╛ ржЖржЫрзЗред ржпрзЗржоржи:

```javascript
const fetchDocuments = async () => {
    // ...
    const response = await axios.get('/api/documents', { params });
    // ...
}

```

**рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛:**
ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ рж╕рж╛ржзрж╛рж░ржгржд ржЦрзБржм ржЪржЮрзНржЪрж▓, рж╕рзЗ ржПржХ рж▓рж╛ржЗржирзЗрж░ ржХрж╛ржЬ рж╢рзЗрж╖ ржирж╛ ржХрж░рзЗржЗ ржкрж░рзЗрж░ рж▓рж╛ржЗржирзЗ ржЪрж▓рзЗ ржпрзЗрждрзЗ ржЪрж╛рзЯред ржХрж┐ржирзНрждрзБ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржЖржирждрзЗ рждрзЛ ржПржХржЯрзБ рж╕ржорзЯ рж▓рж╛ржЧрзЗ (ржпрзЗржоржи рзи рж╕рзЗржХрзЗржирзНржб)ред

* **`async`**: ржлрж╛ржВрж╢ржирзЗрж░ ржЖржЧрзЗ ржПржЯрж╛ рж▓рзЗржЦрж╛рж░ ржорж╛ржирзЗ рж╣рж▓рзЛтАФ"ржПржЗ ржлрж╛ржВрж╢ржиржЯрж╛рждрзЗ ржПржоржи ржХрж┐ржЫрзБ ржХрж╛ржЬ ржЖржЫрзЗ ржпрж╛ рж╢рзЗрж╖ рж╣рждрзЗ рж╕ржорзЯ рж▓рж╛ржЧржмрзЗред"
* **`await`**: ржПржЯрж╛ рж╣рж▓рзЛ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрзБрж▓рж┐рж╢рзЗрж░ ржорждрзЛред рж╕рзЗ ржмрж▓рзЗ, "ржжрж╛ржБрзЬрж╛ржУ! `axios.get` ржПрж░ ржХрж╛ржЬ рж╢рзЗрж╖ ржХрж░рзЗ ржбрзЗржЯрж╛ ржирж┐рзЯрзЗ ржирж╛ ржЖрж╕рж╛ ржкрж░рзНржпржирзНржд рждрзБржорж┐ ржкрж░рзЗрж░ рж▓рж╛ржЗржирзЗ ржпрж╛ржмрзЗ ржирж╛ред"

**ржХрзЗржи ржжрж░ржХрж╛рж░?**
ржпржжрж┐ `await` ржирж╛ ржжрж┐рждрзЗржи, рждржмрзЗ ржбрзЗржЯрж╛ ржЖрж╕рж╛рж░ ржЖржЧрзЗржЗ ржХрзЛржб `setDocuments` ржХрж▓ ржХрж░рзЗ ржжрж┐ржд, ржЖрж░ ржЖржкржирж┐ рж╕рзНржХрзНрж░рж┐ржирзЗ ржХрж┐ржЫрзБржЗ ржжрзЗржЦрждрзЗ ржкрзЗрждрзЗржи ржирж╛ ржХрж╛рж░ржг рждржЦржирзЛ ржбрзЗржЯрж╛ржЗ ржЖрж╕рзЗржирж┐!

---

### рзи. `try`...`catch` (рж╕рзЗржлржЯрж┐ ржирзЗржЯ ржмрж╛ рж╕рзБрж░ржХрзНрж╖рж╛ ржХржмржЪ)

ржХрзЛржбрзЗ ржПржЗ ржмрзНрж▓ржХржЯрж╛ ржЕржирзЗржХржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯрзЗржЫрзЗ:

```javascript
try {
   // рж░рж┐рж╕рзНржХрж┐ ржХрж╛ржЬ (ржпрзЗржоржи рж╕рж╛рж░рзНржнрж╛рж░ ржХрж▓ ржХрж░рж╛)
   await axios.delete(`/api/documents/${id}`);
} catch (err) {
   // ржпржжрж┐ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╣рзЯ (ржпрзЗржоржи ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржирж╛ржЗ)
   alert('Failed to delete document');
}

```

**рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛:**
ржПржЯрж╛ рж╣рж▓рзЛ рж╕рж╛рж░рзНржХрж╛рж╕рзЗрж░ ржЬрж╛рж▓рзЗрж░ (Safety Net) ржорждрзЛред

* **`try`**: ржЖржкржирж┐ ржХрзЛржбржХрзЗ ржмрж▓ржЫрзЗржи, "ржПржЗ ржХрж╛ржЬржЯрж╛ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЛред" (ржпрзЗржоржи ржлрж╛ржЗрж▓ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛)ред
* **`catch`**: ржпржжрж┐ `try`-ржПрж░ ржнрзЗрждрж░рзЗ ржХрзЛржирзЛ ржжрзБрж░рзНржШржЯржирж╛ ржШржЯрзЗ (ржпрзЗржоржи рж╕рж╛рж░рзНржнрж╛рж░ ржбрж╛ржЙржи, ржмрж╛ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ ржирзЗржЗ), рждржЦржи ржкрзБрж░рзЛ ржЕрзНржпрж╛ржк ржХрзНрж░рзНржпрж╛рж╢ ржХрж░ржмрзЗ ржирж╛ ржмрж╛ рж╕рж╛ржжрж╛ рж╣рзЯрзЗ ржпрж╛ржмрзЗ ржирж╛ред ржмрж░ржВ рж╕рзЗ рж▓рж╛ржл ржжрж┐рзЯрзЗ `catch` ржмрзНрж▓ржХрзЗ ржЪрж▓рзЗ ржЖрж╕ржмрзЗ ржПржмржВ рж╕рзБржирзНржжрж░ ржХрж░рзЗ ржПржХржЯрж╛ `alert` ржмрж╛ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржмрзЗред

ржмрж┐ржЧрж┐ржирж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ ржПржЯрж╛ ржоржирзЗ рж░рж╛ржЦржмрзЗржи: **ржмрж╛ржЗрж░рзЗрж░ ржжрзБржирж┐рзЯрж╛рж░ рж╕рж╛ржерзЗ (API/Server) ржХржерж╛ ржмрж▓рж╛рж░ рж╕ржорзЯ рж╕ржмрж╕ржорзЯ `try-catch` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржиред**

---

### рзй. `e.stopPropagation()` (ржХрзНрж▓рж┐ржХ ржЖржЯржХрж╛ржирзЛ)

ржоржбрж╛рж▓ ржмрж╛ ржкржк-ржЖржк ржЕржВрж╢рзЗрж░ ржХрзЛржбрзЗ ржПржХржЯрж╛ ржЖржЬржм рж▓рж╛ржЗржи ржЖржЫрзЗ:

```javascript
<div className="modal" onClick={() => setSelectedDoc(null)}>
  <div className="modal-content" onClick={(e) => e.stopPropagation()}>
     {/* ржнрзЗрждрж░рзЗрж░ ржХржирзНржЯрзЗржирзНржЯ */}
  </div>
</div>

```

**ржжрзГрж╢рзНржпржкржЯ:**
ржЖржкржирж╛рж░ рж╕рзНржХрзНрж░рж┐ржирзЗ ржПржХржЯрж╛ ржкржк-ржЖржк ржмржХрзНрж╕ ржнрзЗрж╕рзЗ ржЖржЫрзЗред

* ржирж┐рзЯржо рж╣рж▓рзЛ: ржкржк-ржЖржкрзЗрж░ **ржмрж╛ржЗрж░рзЗ (ржХрж╛рж▓рзЛ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржбрзЗ)** ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржкржк-ржЖржк ржмржирзНржз рж╣рзЯрзЗ ржпрж╛ржмрзЗред
* ржХрж┐ржирзНрждрзБ ржкржк-ржЖржкрзЗрж░ **ржнрзЗрждрж░рзЗрж░ (рж╕рж╛ржжрж╛ ржЕржВрж╢рзЗ)** ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржХрж┐ рж╕рзЗржЯрж╛ ржмржирзНржз рж╣ржУрзЯрж╛ ржЙржЪрж┐ржд? ржирж╛! ржХрж╛рж░ржг ржЖржкржирж┐ рж╣рзЯрждрзЛ ржнрзЗрждрж░рзЗрж░ рж▓рзЗржЦрж╛ ржХржкрж┐ ржХрж░ржЫрзЗржиред

**рж╕ржорж╕рзНржпрж╛:**
ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗ "ржХрзНрж▓рж┐ржХ" ржЕржирзЗржХржЯрж╛ ржмрзБржжржмрзБржжрзЗрж░ ржорждрзЛ ржирж┐ржЪ ржерзЗржХрзЗ ржУржкрж░рзЗ ржУржарзЗ (Event Bubbling)ред ржЖржкржирж┐ ржпржЦржи ржнрзЗрждрж░рзЗрж░ ржмржХрзНрж╕рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗржи, ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржоржирзЗ ржХрж░рзЗ ржЖржкржирж┐ ржмрж╛ржЗрж░рзЗрж░ ржмржХрзНрж╕рзЗржУ ржХрзНрж▓рж┐ржХ ржХрж░рзЗржЫрзЗржиред рждрж╛ржЗ рж╕рзЗ ржкржк-ржЖржк ржмржирзНржз ржХрж░рзЗ ржжрзЗрзЯред

**рж╕ржорж╛ржзрж╛ржи (`e.stopPropagation()`):**
ржПржЗ ржХрзЛржбржЯрж╛ ржХржорзНржкрж┐ржЙржЯрж╛рж░ржХрзЗ ржмрж▓рзЗтАФ"ржПржЗ ржХрзНрж▓рж┐ржХрзЗрж░ ржЦржмрж░ ржмрж╛ржЗрж░рзЗ ржмрж╛ ржУржкрж░рзЗрж░ рж▓рзЗржнрзЗрж▓рзЗ ржпрзЗрждрзЗ ржжрж┐ржУ ржирж╛ред ржПржЦрж╛ржирзЗржЗ ржерж╛ржорж┐рзЯрзЗ ржжрж╛ржУред"
ржПрж░ ржлрж▓рзЗ ржкржк-ржЖржкрзЗрж░ ржнрзЗрждрж░рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ рж╕рзЗржЯрж╛ ржЖрж░ ржмржирзНржз рж╣рзЯрзЗ ржпрж╛рзЯ ржирж╛ред

---

### ржмрзЛржирж╛рж╕: рждрж╛рж░рж┐ржЦ ржжрзЗржЦрж╛ржирзЛ (`new Date`)

```javascript
new Date(doc.created_at).toLocaleDateString()

```

рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржорзЯржЯрж╛ рж╕рж╛ржзрж╛рж░ржгржд ржПржоржи ржмрж┐ржжржШрзБржЯрзЗ ржлрж░ржорзНржпрж╛ржЯрзЗ ржерж╛ржХрзЗ: `2023-11-02T14:30:00.000Z`ред ржорж╛ржирзБрж╖ ржПржЯрж╛ ржкрзЬрзЗ ржмрзБржЭржмрзЗ ржирж╛ред

* **`new Date(...)`**: ржПржЯрж╛ржХрзЗ ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯрзЗрж░ ржмрзЛржзржЧржорзНржп рж╕ржорзЯрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗред
* **`.toLocaleDateString()`**: ржПржЯрж╛ рж╕ржорзЯржЯрж╛ржХрзЗ ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ рж╕рзЗржЯрж┐ржВрж╕ ржЕржирзБржпрж╛рзЯрзА рж╕рж╣ржЬ ржлрж░ржорзНржпрж╛ржЯрзЗ ржжрзЗржЦрж╛рзЯ (ржпрзЗржоржи: `11/2/2023` ржмрж╛ `2 Nov 2023`)ред

ржЖрж╢рж╛ ржХрж░рж┐ ржПржЗ ржЕржВрж╢ржЧрзБрж▓рзЛ ржПржЦржи ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржкрж░рж┐рж╖рзНржХрж╛рж░! ржЖржкржирж┐ ржХрзЛржбржЯрж┐ ржирж┐рзЯрзЗ ржПржХрзНрж╕ржкрзЗрж░рж┐ржорзЗржирзНржЯ ржХрж░рждрзЗ ржЧрж┐рзЯрзЗ ржХрзЛржирзЛ ржПрж░рж░ ржкрзЗрж▓рзЗ ржЖржорж╛ржХрзЗ ржЬрж╛ржирж╛рждрзЗ ржкрж╛рж░рзЗржиред


====================================================================================================================

ржирж┐рж╢рзНржЪрзЯржЗ! `Chat.jsx` ржлрж╛ржЗрж▓рзЗрж░ ржЖрж░ржУ ржХрж┐ржЫрзБ ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ ржХрж┐ржирзНрждрзБ ржоржЬрж╛рж░ ржЕржВрж╢ ржЖржорж┐ рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ ржмрзБржЭрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрж┐ред ржПржЧрзБрж▓рзЛ ржЬрж╛ржирж▓рзЗ ржЖржкржирж┐ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯ ржХрзЛржб ржЖрж░ржУ ржнрж╛рж▓рзЛ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗржиред

### рзз. `e.preventDefault()` (ржкрзЗржЬ рж░рж┐рж▓рзЛржб ржЖржЯржХрж╛ржирзЛ)

ржХрзЛржбрзЗрж░ `handleSubmit` ржлрж╛ржВрж╢ржирзЗрж░ ржПржХржжржо рж╢рзБрж░рзБрждрзЗ ржПржЗ рж▓рж╛ржЗржиржЯрж╛ ржЖржЫрзЗ:

```javascript
const handleSubmit = async (e) => {
    e.preventDefault();
    // ... ржмрж╛ржХрж┐ ржХрж╛ржЬ
}

```

**ржПржЯрж╛ ржХрзЗржи ржжрж░ржХрж╛рж░?**
рж╕рж╛ржзрж╛рж░ржгржд HTML-ржП ржпржЦржи ржЖржкржирж┐ ржХрзЛржирзЛ `<form>` рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЗржи ржмрж╛ "Send" ржмрж╛ржЯржирзЗ ржЪрж╛ржк ржжрзЗржи, ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржкрзБрж░рзЛ ржкрзЗржЬржЯрж╛ **рж░рж┐рж▓рзЛржб (Reload)** ржжрзЗрзЯред
ржХрж┐ржирзНрждрзБ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯрзЗ ржЖржорж░рж╛ ржЪрж╛ржЗ ржирж╛ ржкрзЗржЬ рж░рж┐рж▓рзЛржб рж╣рзЛржХ (ржХрж╛рж░ржг рж░рж┐рж▓рзЛржб рж╣рж▓рзЗ ржЪрзНржпрж╛ржЯ рж╣рж┐рж╕рзНржЯрзНрж░рж┐ ржорзБржЫрзЗ ржпрж╛ржмрзЗ)ред

* **`e`**: ржПржЯрж╛ рж╣рж▓рзЛ "ржЗржнрзЗржирзНржЯ" (Event)ред ржорж╛ржирзЗ ржмрж╛ржЯржирзЗ ржЪрж╛ржк ржжрзЗржУрзЯрж╛рж░ ржШржЯржирж╛ржЯрж╛ред
* **`preventDefault()`**: ржПржЯрж╛ ржмрзНрж░рж╛ржЙржЬрж╛рж░ржХрзЗ ржмрж▓рзЗтАФ"рж╢рзЛржирзЛ, рждрзЛржорж╛рж░ рж╕рзНржмржнрж╛ржм рж╣рж▓рзЛ рж░рж┐рж▓рзЛржб ржжрзЗржУрзЯрж╛, ржХрж┐ржирзНрждрзБ ржЦржмрж░ржжрж╛рж░! ржПржЦржи рж░рж┐рж▓рзЛржб ржжрж┐ржУ ржирж╛ред ржЖржорж┐ ржпрзЗржнрж╛ржмрзЗ ржмрж▓ржЫрж┐ рж╕рзЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЛред"

---

### рзи. ржорзЗржЯрж╛ржбрзЗржЯрж╛ ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ (ржЫрж╛ржБржХржирж┐ ржжрж┐рзЯрзЗ рждржерзНржп ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛)

`renderChunk` ржлрж╛ржВрж╢ржирзЗрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрж╛ ржЕржжрзНржнрзБржд ржХрзЛржб ржЖржЫрзЗред ржПржЯрж╛ ржПржХржЯрзБ ржХржарж┐ржи ржоржирзЗ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ ржХрж╛ржЬржЯрж╛ ржЦрзБржм рж╕рзЛржЬрж╛ред

```javascript
{Object.entries(metadata).map(([key, value]) => {
    // ржПржЗ рж▓рж┐рж╕рзНржЯрзЗрж░ рж╢ржмрзНржжржЧрзБрж▓рзЛ ржерж╛ржХрж▓рзЗ ржмрж╛ржж ржжрж╛ржУ (Skip)
    if (['document_id', 'partition', 'start_time'].includes(key)) {
        return null; 
    }
    // ржмрж╛ржХрж┐ржЧрзБрж▓рзЛ ржжрзЗржЦрж╛ржУ
    return ( ... );
})}

```

**рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛:**
ржоржирзЗ ржХрж░рзБржи AI ржПржХржЯрж╛ ржбржХрзБржорзЗржирзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржЕржирзЗржХ ржПржХрзНрж╕ржЯрзНрж░рж╛ рждржерзНржп (Metadata) ржкрж╛ржарж╛рзЯред ржХрж┐ржЫрзБ рждржерзНржп ржЗржЙржЬрж╛рж░рзЗрж░ ржжрзЗржЦрж╛рж░ ржжрж░ржХрж╛рж░ ржирзЗржЗ (ржпрзЗржоржи: `document_id` ржпрзЗржЯрж╛ ржПржХржЯрж╛ ржмрж┐рж╢рж╛рж▓ рж╣рж┐ржЬрж┐ржмрж┐ржЬрж┐ ржиржорзНржмрж░)ред ржЖржмрж╛рж░ ржХрж┐ржЫрзБ рждржерзНржп ржжрж░ржХрж╛рж░рж┐ (ржпрзЗржоржи: `author_name` ржмрж╛ `department`)ред

* ржПржЗ ржХрзЛржбржЯрж╛ ржПржХржЯрж╛ **ржЫрж╛ржБржХржирж┐ (Filter)**-ржПрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзЗред
* рж╕рзЗ ржЪрзЗржХ ржХрж░рзЗ: "ржПржЗ рждржерзНржпрзЗрж░ ржирж╛ржо ржХрж┐ `document_id` ржмрж╛ `start_time`?"
* **ржпржжрж┐ рж╣рзНржпрж╛ржБ рж╣рзЯ:** `return null` (ржорж╛ржирзЗ ржХрж┐ржЪрзНржЫрзБ ржжрзЗржЦрж┐ржУ ржирж╛, рж▓рзБржХрж┐рзЯрзЗ ржлрзЗрж▓рзЛ)ред
* **ржпржжрж┐ ржирж╛ рж╣рзЯ:** рждрж╛рж╣рж▓рзЗ рж╕рзНржХрзНрж░рж┐ржирзЗ рж╕рзБржирзНржжрж░ ржХрж░рзЗ ржжрзЗржЦрж╛ржУред

---

### рзй. ржбрж╛ржЗржирж╛ржорж┐ржХ ржбрж┐ржЬрж╛ржЗржи (CSS Classes)

ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржирзЛрж░ рж╕ржорзЯ ржПржЗ рж▓рж╛ржЗржиржЯрж╛ ржЦрзЗрзЯрж╛рж▓ ржХрж░рзБржи:

```javascript
<div key={message.id} className={`message ${message.type}`}>

```

ржПржЦрж╛ржирзЗ `className` ржмрж╛ рж╕рзНржЯрж╛ржЗрж▓ржЯрж╛ ржлрж┐ржХрзНрж╕ржб ржирзЯ, ржПржЯрж╛ **ржЕржмрж╕рзНржерж╛ ржмрзБржЭрзЗ ржмржжрж▓рж╛рзЯ**ред

* **`message`**: ржПржЯрж╛ рж╕ржм ржорзЗрж╕рзЗржЬрзЗржЗ ржерж╛ржХржмрзЗ (ржмрзЗрж╕рж┐ржХ ржбрж┐ржЬрж╛ржЗржи)ред
* **`${message.type}`**: ржПржЯрж╛ ржнрзЗрж░рж┐рзЯрзЗржмрж▓ред
* ржпржжрж┐ ржорзЗрж╕рзЗржЬржЯрж╛ ржЖржкржирж╛рж░ рж╣рзЯ, ржХрзЛржб рж╣рзЯрзЗ ржпрж╛ржмрзЗ: `class="message user"` (ржбрж╛ржи ржжрж┐ржХрзЗ ржирзАрж▓ рж░ржЩрзЗрж░ ржмрж╛ржмрж▓)ред
* ржпржжрж┐ ржорзЗрж╕рзЗржЬржЯрж╛ AI-ржПрж░ рж╣рзЯ, ржХрзЛржб рж╣рзЯрзЗ ржпрж╛ржмрзЗ: `class="message llm"` (ржмрж╛ржо ржжрж┐ржХрзЗ ржзрзВрж╕рж░ ржмрж╛ржмрж▓)ред
* ржпржжрж┐ ржПрж░рж░ рж╣рзЯ, ржХрзЛржб рж╣рзЯрзЗ ржпрж╛ржмрзЗ: `class="message error"` (рж▓рж╛рж▓ рж░ржЩрзЗрж░ ржмрж╛ржмрж▓)ред



ржПржнрж╛ржмрзЗржЗ CSS ржлрж╛ржЗрж▓рзЗ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ рж░ржВ рж╕рзЗржЯ ржХрж░рж╛ ржЖржЫрзЗ, ржЖрж░ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯ ржЕржЯрзЛржорзЗржЯрж┐ржХ рж╕ржарж┐ржХ рж░ржВ ржмрзЗржЫрзЗ ржирзЗрзЯред

---

### рзк. `Date.now()` (ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ рждрзИрж░рж┐ ржХрж░рж╛)

```javascript
const userMessage = {
  id: Date.now(),   // <--- ржПржЗ ржЕржВрж╢ржЯрж╛
  type: 'user',
  content: input,
};

```

**ржПржЯрж╛ ржХрзА?**
рж░рж┐рзЯрзНржпрж╛ржХрзНржЯрзЗ ржпржЦржиржЗ ржЖржкржирж┐ ржХрзЛржирзЛ рж▓рж┐рж╕рзНржЯ ржмрж╛ржирж╛ржмрзЗржи, ржкрзНрж░рждрзНржпрзЗржХржЯрж╛ ржЖржЗржЯрзЗржорзЗрж░ ржПржХржЯрж╛ ржЗржЙржирж┐ржХ ржмрж╛ ржЕржжрзНржмрж┐рждрзАрзЯ ржирж╛ржо (ID) ржерж╛ржХрждрзЗ рж╣рзЯред рждрж╛ ржирж╛ рж╣рж▓рзЗ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯ ржЧрзБрж▓рж┐рзЯрзЗ ржлрзЗрж▓рзЗред

* **`Date.now()`**: ржПржЯрж╛ ржмрж░рзНрждржорж╛ржи рж╕ржорзЯржХрзЗ ржорж┐рж▓рж┐-рж╕рзЗржХрзЗржирзНржбрзЗ ржХржиржнрж╛рж░рзНржЯ ржХрж░рзЗ ржПржХржЯрж╛ ржмрж┐рж╢рж╛рж▓ ржиржорзНржмрж░ ржжрзЗрзЯ (ржпрзЗржоржи: `17049583...`)ред
* ржпрзЗрж╣рзЗрждрзБ ржкрзНрж░рждрж┐ ржорж┐рж▓рж┐-рж╕рзЗржХрзЗржирзНржбрзЗ рж╕ржорзЯ ржкрж╛рж▓рзНржЯрж╛ржЪрзНржЫрзЗ, рждрж╛ржЗ ржЖржкржирж┐ ржкрж░ржкрж░ ржжрзБржЯрзЛ ржорзЗрж╕рзЗржЬ ржжрж┐рж▓рзЗржУ рждрж╛ржжрзЗрж░ ржЖржЗржбрж┐ ржХржЦржирзЛ ржПржХ рж╣ржмрзЗ ржирж╛ред ржПржЯрж╛ ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ ржмрж╛ржирж╛ржирзЛрж░ ржПржХржЯрж╛ ржЦрзБржм рж╕рж╣ржЬ ржЯрзНрж░рж┐ржХ!

---

### рзл. ржХржирзНржбрж┐рж╢ржирж╛рж▓ рж░рзЗржирзНржбрж╛рж░рж┐ржВ (рж╢рж░рзНржд рж╕рж╛ржкрзЗржХрзНрж╖рзЗ ржжрзЗржЦрж╛ржирзЛ)

ржХрзЛржбрзЗ ржПржЗ ржЪрж┐рж╣рзНржиржЯрж╛ `&&` ржкрзНрж░ржЪрзБрж░ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯрзЗржЫрзЗред ржпрзЗржоржи:

```javascript
{message.type === 'user' && (
    <div className="message-content">...</div>
)}

```

**рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛:**
ржПржЯрж╛ржХрзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВрзЯрзЗрж░ ржнрж╛рж╖рж╛рзЯ ржмрж▓рж╛ рж╣рзЯ **"рж╢рж░рзНржЯржХрж╛ржЯ ржЗржл (Short-circuit Evaluation)"**ред

* ржПрж░ ржорж╛ржирзЗ рж╣рж▓рзЛ: **"ржпржжрж┐ ржмрж╛ржо ржкрж╛рж╢рзЗрж░ рж╢рж░рзНрждржЯрж╛ рж╕рждрзНржп рж╣рзЯ, рждржмрзЗржЗ ржбрж╛ржи ржкрж╛рж╢рзЗрж░ ржЬрж┐ржирж┐рж╕ржЯрж╛ ржжрзЗржЦрж╛ржУред"**
* ржЕрж░рзНржерж╛рзО: "ржпржжрж┐ ржорзЗрж╕рзЗржЬ ржЯрж╛ржЗржк 'user' рж╣рзЯ, рждржмрзЗржЗ ржЗржЙржЬрж╛рж░рзЗрж░ ржбрж┐ржЬрж╛ржЗржи ржжрзЗржЦрж╛ржУред ржирж╛ рж╣рж▓рзЗ ржХрж┐ржЪрзНржЫрзБ ржжрзЗржЦрж╛ржмрзЗ ржирж╛ред"

ржПржнрж╛ржмрзЗржЗ ржПржХ рж▓рж╛ржЗржирзЗрж░ ржоржзрзНржпрзЗ ржЖржорж░рж╛ ржарж┐ржХ ржХрж░рж┐ ржХржЦржи рж▓рзЛржбрж┐ржВ ржЪрж╛ржХрж╛ ржжрзЗржЦрж╛ржм, ржХржЦржи ржЪрзНржпрж╛ржЯ ржжрзЗржЦрж╛ржм, ржЖрж░ ржХржЦржи ржПрж░рж░ ржжрзЗржЦрж╛ржмред

ржЖрж╢рж╛ ржХрж░рж┐ ржПржЗ ржЫрзЛржЯ ржЫрзЛржЯ рж▓ржЬрж┐ржХржЧрзБрж▓рзЛ ржПржЦржи ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржЖрж░ржУ ржкрж░рж┐рж╖рзНржХрж╛рж░!

===========================================================

ржЕржмрж╢рзНржпржЗ! ржХрзЛржбржЯрж┐ ржпрзЗрж╣рзЗрждрзБ ржмрзЗрж╢ ржмрзЬ, ржПржЦрж╛ржирзЗ рж╢рзЗржЦрж╛рж░ ржорждрзЛ ржЖрж░ржУ ржЕржирзЗржХ ржХрж┐ржЫрзБ ржЖржЫрзЗред ржЖржорж┐ ржЖрж░ржУ рзкржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХржирж╕рзЗржкрзНржЯ ржПржХржжржо рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ ржмрзБржЭрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрж┐ред

### рзз. ржЗржиржкрзБржЯ ржмржХрзНрж╕рзЗрж░ ржорзНржпрж╛ржЬрж┐ржХ (Controlled Component)

ржХрзЛржбрзЗрж░ ржПржЗ рж▓рж╛ржЗржиржЯрж╛ ржжрзЗржЦрзБржи:

```javascript
<input
  value={input}
  onChange={(e) => setInput(e.target.value)}
/>

```

**ржПржЯрж╛ ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?**
рж╕рж╛ржзрж╛рж░ржг HTML-ржП ржЖржкржирж┐ ржмржХрзНрж╕рзЗ ржпрж╛ ржЯрж╛ржЗржк ржХрж░рзЗржи, рждрж╛ ржУржЦрж╛ржирзЗржЗ ржерж╛ржХрзЗред ржХрж┐ржирзНрждрзБ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯрзЗ ржПржЯрж╛ ржПржХржЯрзБ ржЕржирзНржпржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред ржПржЯрж╛ржХрзЗ ржмрж▓рзЗ **"Controlled Component"**ред

* **`value={input}`**: ржЗржиржкрзБржЯ ржмржХрзНрж╕ржХрзЗ ржмрж▓рж╛ рж╣ржЪрзНржЫрзЗтАФ"рждрзЛржорж╛рж░ ржнрзЗрждрж░рзЗ ржпрж╛ рж▓рзЗржЦрж╛ ржерж╛ржХржмрзЗ, рждрж╛ ржЖрж╕ржмрзЗ ржЖржорж╛ржжрзЗрж░ ржорзЗржорзЛрж░рж┐ (`input` state) ржерзЗржХрзЗред"
* **`onChange`**: ржЖржкржирж┐ ржпржЦржиржЗ ржХрж┐ржмрзЛрж░рзНржбрзЗ ржПржХржЯрж╛ ржЕржХрзНрж╖рж░ ржЪрж╛ржкрзЗржи (ржпрзЗржоржи 'A'), рждржЦржи:
рзз. `onChange` рж╕рзЗржЯрж╛ ржзрж░рзЗ ржлрзЗрж▓рзЗред
рзи. рж╕рзЗ `setInput` ржжрж┐рзЯрзЗ ржорзЗржорзЛрж░рж┐ ржЖржкржбрзЗржЯ ржХрж░рзЗред
рзй. ржорзЗржорзЛрж░рж┐ ржЖржкржбрзЗржЯ рж╣рж▓рзЗ ржЗржиржкрзБржЯ ржмржХрзНрж╕рзЗ 'A' рж▓рзЗржЦрж╛ржЯрж╛ ржнрзЗрж╕рзЗ ржУржарзЗред
* **ржХрзЗржи ржПржд ржкрзНржпрж╛ржБржЪ?** ржХрж╛рж░ржг ржПрж░ ржлрж▓рзЗ ржЖржкржирж┐ ржпрзЗржХрзЛржирзЛ рж╕ржорзЯ ржХрзЛржб ржжрж┐рзЯрзЗ ржЗржиржкрзБржЯ ржмржХрзНрж╕ ржХрзНрж▓рж┐рзЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи (ржпрзЗржоржи ржорзЗрж╕рзЗржЬ рж╕рзЗржирзНржб ржХрж░рж╛рж░ ржкрж░ ржмржХрзНрж╕ ржЦрж╛рж▓рж┐ рж╣рзЯрзЗ ржпрж╛рзЯ)ред

---

### рзи. ржмрзБржжрзНржзрж┐ржорж╛ржи ржмрж╛ржЯржи (Disabled State Logic)

рж╕рзЗржирзНржб ржмрж╛ржЯржиржЯрж╛ рж╕ржмрж╕ржорзЯ ржХрж╛ржЬ ржХрж░рзЗ ржирж╛ред ржХрзЛржбржЯрж┐ ржЦрзЗрзЯрж╛рж▓ ржХрж░рзБржи:

```javascript
<button disabled={loading || !input.trim()}>
  Send
</button>

```

**ржмрзНржпрж╛ржЦрзНржпрж╛:**
ржПржЦрж╛ржирзЗ ржмрж╛ржЯржиржХрзЗ ржмрж▓рж╛ рж╣ржЪрзНржЫрзЗтАФ"рждрзБржорж┐ ржирж┐ржЬрзЗржХрзЗ **ржЕржЪрж▓ (Disabled)** ржХрж░рзЗ рж░рж╛ржЦржмрзЗ, ржпржжрж┐..."
рзз. **`loading` рж╕рждрзНржп рж╣рзЯ:** ржЕрж░рзНржерж╛рзО AI ржпржЦржи ржЙрждрзНрждрж░ ржнрж╛ржмржЫрзЗ, рждржЦржи ржпрж╛рждрзЗ ржЗржЙржЬрж╛рж░ ржмрж╛рж░ржмрж╛рж░ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржбрж┐рж╕рзНржЯрж╛рж░рзНржм ржирж╛ ржХрж░рзЗред
рзи. **`!input.trim()` рж╕рждрзНржп рж╣рзЯ:** `trim()` ржорж╛ржирзЗ рж▓рзЗржЦрж╛рж░ ржЖржЧрзЗ-ржкрж┐ржЫрзЗрж░ ржлрж╛ржХрж╛ рж╕рзНржкрзЗрж╕ ржХрзЗржЯрзЗ ржлрзЗрж▓рж╛ред ржЕрж░рзНржерж╛рзО, ржЖржкржирж┐ ржпржжрж┐ ржмржХрзНрж╕рзЗ ржХрж┐ржЫрзБ ржирж╛ рж▓рзЗржЦрзЗржи ржмрж╛ рж╢рзБржзрзБ рж╕рзНржкрзЗрж╕ ржжрж┐рзЯрзЗ рж░рж╛ржЦрзЗржи, рждрж╛рж╣рж▓рзЗржУ ржмрж╛ржЯржи ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛ред

ржПржЯрж╛ ржПржХржЯрж╛ ржнрж╛рж▓рзЛ **UX (User Experience)**, ржХрж╛рж░ржг ржПржЯрж╛ ржнрзБрж▓рзЗ ржлрж╛ржБржХрж╛ ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛ржирзЛ ржЖржЯржХрж╛рзЯред

---

### рзй. `useEffect`-ржПрж░ ржкрж╛рж╣рж╛рж░рж╛ржжрж╛рж░ (Dependency Array)

рж╕рж┐рж╕рзНржЯрзЗржо ржкрзНрж░ржорзНржкржЯ рж╕рзЗржн ржХрж░рж╛рж░ ржХрзЛржбржЯрж╛ ржжрзЗржЦрзБржи:

```javascript
useEffect(() => {
    localStorage.setItem('ragie_system_prompt', systemPrompt);
}, [systemPrompt]); // <--- ржПржЗ ржмрзНрж░рзНржпрж╛ржХрзЗржЯрзЗрж░ ржнрзЗрждрж░рзЗрж░ ржЕржВрж╢ржЯрж╛

```

**ржмрзНржпрж╛ржЦрзНржпрж╛:**
`useEffect`-ржПрж░ рж╢рзЗрж╖рзЗ ржпрзЗ `[systemPrompt]` ржЖржЫрзЗ, ржПржЯрж╛ржХрзЗ ржмрж▓рзЗ **Dependency Array**ред ржПржЯрж╛ржХрзЗ ржЖржкржирж┐ ржПржХржЬржи **"ржкрж╛рж╣рж╛рж░рж╛ржжрж╛рж░"** ржнрж╛ржмрждрзЗ ржкрж╛рж░рзЗржиред

* ржЖржкржирж┐ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯржХрзЗ ржмрж▓ржЫрзЗржи: "ржПржЗ `setItem`-ржПрж░ ржХрж╛ржЬржЯрж╛ рж╢рзБржзрзБ рждржЦржиржЗ ржХрж░ржмрзЗ, ржпржЦржи `systemPrompt`-ржПрж░ ржнрзЗрждрж░рзЗ ржХрзЛржирзЛ ржкрж░рж┐ржмрж░рзНрждржи ржЖрж╕ржмрзЗред"
* ржпржжрж┐ ржПржЯрж╛ ржирж╛ ржжрж┐рждрзЗржи, рждржмрзЗ рж░рж┐рзЯрзНржпрж╛ржХрзНржЯ ржкрзНрж░рждрж┐ ржорж┐рж▓рж┐-рж╕рзЗржХрзЗржирзНржбрзЗ ржмрж╛ ржмрж╛рж░ржмрж╛рж░ ржЕржпржерж╛ рж╕рзЗржн ржХрж░рждрзЗ ржерж╛ржХржд, ржпрж╛ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ ржмрж╛рж░рзЛржЯрж╛ ржмрж╛ржЬрж┐рзЯрзЗ ржжрж┐рждред
* `[]` (ржЦрж╛рж▓рж┐ ржмрзНрж░рзНржпрж╛ржХрзЗржЯ) ржжрж┐рж▓рзЗ ржХрж╛ржЬржЯрж╛ рж╢рзБржзрзБ **ржПржХржмрж╛рж░** (ржкрзЗржЬ рж▓рзЛржб рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ) рж╣рзЯред

---

### рзк. ржЯрж╛рж░рзНржирж╛рж░рж┐ ржЕржкрж╛рж░рзЗржЯрж░ (ржПржХ рж▓рж╛ржЗржирзЗ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржирзЗржУрзЯрж╛)

ржХрзЛржбрзЗ ржПржЗ ржЕржжрзНржнрзБржд ржЪрж┐рж╣рзНржиржЯрж╛ `? :` ржЕржирзЗржХ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржЫрзЗред ржпрзЗржоржи:

```javascript
{useLLM ? 'ЁЯдЦ LLM Mode' : 'ЁЯУК Raw Retrieval'}

```

**рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛:**
ржПржЯрж╛ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВрзЯрзЗрж░ ржПржХржЯрж╛ рж╢рж░рзНржЯржХрж╛ржЯ `if-else`ред

* **`?` (ржкрзНрж░рж╢рзНржиржмрзЛржзржХ):** ржПрж░ ржорж╛ржирзЗ рж╣рж▓рзЛтАФ"рж╢рж░рзНрждржЯрж╛ ржХрж┐ рж╕рждрзНржпрж┐?" (ржПржЦрж╛ржирзЗ: `useLLM` ржХрж┐ ржЕржи ржЖржЫрзЗ?)
* **`:` (ржХрзЛрж▓ржи):** ржПрж░ ржорж╛ржирзЗ рж╣рж▓рзЛтАФ"ржирж╛рж╣рж▓рзЗ"ред

**ржкрзБрж░рзЛ ржорж╛ржирзЗ ржжрж╛ржБрзЬрж╛рзЯ:**
"ржпржжрж┐ `useLLM` ржЕржи ржерж╛ржХрзЗ рждржмрзЗ 'ЁЯдЦ LLM Mode' ржжрзЗржЦрж╛ржУ, **ржЖрж░ ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ (:)** рждржмрзЗ 'ЁЯУК Raw Retrieval' ржжрзЗржЦрж╛ржУред"
ржмрзЬ ржХрж░рзЗ рзл рж▓рж╛ржЗржирзЗрж░ ржХрзЛржб ржирж╛ рж▓рж┐ржЦрзЗ ржПржХ рж▓рж╛ржЗржирзЗржЗ ржХрж╛ржЬ рж╢рзЗрж╖ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

---

### ржмрзЛржирж╛рж╕: `...prev` (ржкрзБрж░рж╛ржирзЛ рж▓рж┐рж╕рзНржЯрж┐ ржоржирзЗ рж░рж╛ржЦрж╛)

ржорзЗрж╕рзЗржЬ ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ рж╕ржорзЯ ржПржЗ ржЕржжрзНржнрзБржд ржХрзЛржбржЯрж╛ рж▓рзЗржЦрж╛ рж╣рзЯрзЗржЫрзЗ:

```javascript
setMessages((prev) => [...prev, userMessage]);

```

**ржХрзЗржи рж╢рзБржзрзБ `setMessages([userMessage])` рж▓рж┐ржЦрж▓рж╛ржо ржирж╛?**
ржпржжрж┐ ржЖржкржирж┐ `...prev` ржирж╛ рж▓рж┐ржЦрждрзЗржи, рждржмрзЗ ржирждрзБржи ржорзЗрж╕рзЗржЬржЯрж╛ ржПрж╕рзЗ ржкрзБрж░рж╛ржирзЛ рж╕ржм ржорзЗрж╕рзЗржЬржХрзЗ **ржорзБржЫрзЗ ржлрзЗрж▓ржд**!

* **`prev`**: ржорж╛ржирзЗ рж╣рж▓рзЛ "ржПржЦржи ржкрж░рзНржпржирзНржд ржпрж╛ ржорзЗрж╕рзЗржЬ ржЖржЫрзЗ"ред
* **`...prev`**: ржорж╛ржирзЗ рж╣рж▓рзЛ "ржкрзБрж░рж╛ржирзЛ рж╕ржм ржорзЗрж╕рзЗржЬ ржЖржЧрзЗ ржХржкрж┐ ржХрж░рзЗ ржмрж╕рж╛ржУ"ред
* **`, userMessage`**: "рждрж╛рж░ржкрж░ рж╢рзЗрж╖рзЗ ржирждрзБржи ржорзЗрж╕рзЗржЬржЯрж╛ ржмрж╕рж╛ржУред"

ржПржнрж╛ржмрзЗржЗ ржЪрзНржпрж╛ржЯ рж╣рж┐рж╕рзНржЯрзНрж░рж┐ рждрзИрж░рж┐ рж╣рзЯ, ржПржХржЯрж╛рж░ ржкрж░ ржПржХржЯрж╛ ржорзЗрж╕рзЗржЬ ржЬржорж╛ рж╣рждрзЗ ржерж╛ржХрзЗред

ржЖрж╢рж╛ ржХрж░рж┐ ржПржЗ ржмрзНржпрж╛ржЦрзНржпрж╛ржЧрзБрж▓рзЛ ржЖржкржирж╛рж░ ржХрзЛржб ржмрзЛржЭрж╛рж░ ржЬрж╛рж░рзНржирж┐рждрзЗ ржЖрж░ржУ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗ!